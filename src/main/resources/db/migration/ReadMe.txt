sql скрипты

Чтобы гибернейт не генерировал таблицы на основе классов-сущностей, а проверил, можно ли связать их с таблицами из миграций,
в файле application.properties  пишем строку: spring.jpa.hibernate.ddl-auto=validate

Для автоматического создания таблиц. При этом мы полностью контролируем структуру таблицы, не полагаясь на sql,
генерируемый гибернейтом. + инструменты миграции ведут жуонал миграций, в котором есть версия выполненного скрипта,
его текущий статус, хэш-сумма для предотвращения нечаянных изменений в скрипте

В 9 создаётся триггер на хешироване пароля пользователя, чтобы он в открытом виде не хранился. + у нас нет авторизации
Это что-то типа имитации spring security
В кавычках алгоритм хеширования, sha512
Это аргументы функции digest
1 это строка с паролем
А 2 алгоритм
NEW это специальное ключевое слово в триггерах postgresql
Оно представляет собой строку таблицы, которая сохраняется в данный момент

Триггер - это функция, которая вызывается субд при наступлении какого-то события.
В данном случае он вызывается перед вставкой строки данных пользователя в таблицу с пользователями. Он хеширует пароль пользователя.
Берётся строка со столбцом password в голом виде. Пароль хэшируется, и вместо исходного пароля вставляется хеш

10 создает пользователя приложения
От его имени будут создаваться карточки

11 нужен чтобы автоматически заполнять поле с предыдущим статусом карточки. Это нужно чтобы восстанавливать карточку из архива

Триггер - это функция, которая вызывается субд при наступлении какого-то события.
В данном случае он вызывается перед вставкой строки данных пользователя в таблицу с пользователями. Он хеширует пароль пользователя.
Берётся строка со столбцом password в голом виде. Пароль хэшируется, и вместо исходного пароля вставляется хеш